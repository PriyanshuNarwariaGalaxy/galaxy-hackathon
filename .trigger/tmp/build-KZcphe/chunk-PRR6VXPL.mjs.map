{
  "version": 3,
  "sources": ["../../../src/trigger/tasks/prompt.task.ts"],
  "sourcesContent": ["import { task } from \"@trigger.dev/sdk/v3\";\nimport { nodeRegistry } from \"@/src/core/nodes/registry\";\nimport { prisma } from \"@/src/db/prisma\";\n\nfunction now() {\n  return new Date();\n}\n\nexport const promptTask = task({\n  id: \"node.prompt\",\n  run: async (payload: { workflowRunId: string; nodeId: string; input: unknown }, { ctx }) => {\n    const def = nodeRegistry.get(\"prompt\");\n    const validatedInput = def.inputSchema.parse(payload.input);\n\n    await prisma.nodeRun.update({\n      where: { workflowRunId_nodeId: { workflowRunId: payload.workflowRunId, nodeId: payload.nodeId } },\n      data: { status: \"RUNNING\", startedAt: now(), input: validatedInput as any },\n    });\n\n    // Deterministic mock (Phase 3 still no real providers for prompt)\n    const rawOutput = { text: validatedInput.text };\n    const validatedOutput = def.outputSchema.parse(rawOutput);\n\n    await prisma.nodeRun.update({\n      where: { workflowRunId_nodeId: { workflowRunId: payload.workflowRunId, nodeId: payload.nodeId } },\n      data: { status: \"COMPLETED\", finishedAt: now(), output: validatedOutput as any },\n    });\n\n    return validatedOutput;\n  },\n});\n\n"],
  "mappings": ";;;;;;;;;;;;;;;AAAA;AAIA,SAAS,MAAM;AACb,SAAO,oBAAI,KAAK;AAClB;AAFS;AAIF,IAAM,aAAa,KAAK;AAAA,EAC7B,IAAI;AAAA,EACJ,KAAK,8BAAO,SAAoE,EAAE,IAAI,MAAM;AAC1F,UAAM,MAAM,aAAa,IAAI,QAAQ;AACrC,UAAM,iBAAiB,IAAI,YAAY,MAAM,QAAQ,KAAK;AAE1D,UAAM,OAAO,QAAQ,OAAO;AAAA,MAC1B,OAAO,EAAE,sBAAsB,EAAE,eAAe,QAAQ,eAAe,QAAQ,QAAQ,OAAO,EAAE;AAAA,MAChG,MAAM,EAAE,QAAQ,WAAW,WAAW,IAAI,GAAG,OAAO,eAAsB;AAAA,IAC5E,CAAC;AAGD,UAAM,YAAY,EAAE,MAAM,eAAe,KAAK;AAC9C,UAAM,kBAAkB,IAAI,aAAa,MAAM,SAAS;AAExD,UAAM,OAAO,QAAQ,OAAO;AAAA,MAC1B,OAAO,EAAE,sBAAsB,EAAE,eAAe,QAAQ,eAAe,QAAQ,QAAQ,OAAO,EAAE;AAAA,MAChG,MAAM,EAAE,QAAQ,aAAa,YAAY,IAAI,GAAG,QAAQ,gBAAuB;AAAA,IACjF,CAAC;AAED,WAAO;AAAA,EACT,GAnBK;AAoBP,CAAC;",
  "names": []
}
